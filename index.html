<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Das Kompostwesen</title>
    <link rel="stylesheet" href="css/layers.css">
</head>
<body>
    <!-- LAYER 0: KOMPOST A + SCHWARZE KUGEL -->
    <div id="layer0" class="layer active">
        <div class="compost-start" id="compost-start">
            <img src="images/kompost_a.jpg" alt="Komposthaufen" class="compost-photo">
            
            <!-- Schwarze Kugel (erscheint nach erstem Click) -->
            <div class="black-orb hidden" id="black-orb">
                <div class="orb-inner"></div>
            </div>
            
            <!-- Buchcover (erscheint nach Kugel-Click) -->
            <div class="book-reveal hidden" id="book-reveal">
                <img src="images/buchcover_real.jpg" alt="Buchcover" class="book-cover-reveal">
            </div>
        </div>
    </div>

    <!-- LAYER 1: BUCH LESEN (Inhaltsverzeichnis + Kapitel) -->
    <div id="layer1" class="layer">
        <!-- Kompost B Hintergrund -->
        <div class="compost-background" id="compost-bg-1">
            <img src="images/kompost_b.jpg" alt="Kompost">
        </div>
        
        <!-- Buch-Fenster -->
        <div class="book-window">
            <div class="book-header">
                <h1 id="book-title">Die fr√∂hliche Abschaffung von Ostdeutschland</h1>
                <p class="book-subtitle">Gesammelte Werke</p>
            </div>
            
            <!-- Inhaltsverzeichnis -->
            <div class="table-of-contents" id="toc">
                <h2>Inhaltsverzeichnis</h2>
                <div id="toc-list"></div>
            </div>
            
            <!-- Lese-Ansicht -->
            <div class="reading-view hidden" id="reading-view">
                <div class="chapter-header">
                    <button class="nav-btn" id="prev-chapter">‚Üê Vorheriges</button>
                    <h2 id="chapter-title"></h2>
                    <button class="nav-btn" id="next-chapter">N√§chstes ‚Üí</button>
                </div>
                
                <div class="chapter-content" id="chapter-content"></div>
                
                <div class="chapter-footer">
                    <button class="btn-secondary" id="back-to-toc">‚Üê Zur√ºck zum Inhaltsverzeichnis</button>
                    <div class="chapter-meta" id="chapter-meta"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- LAYER 2: BIOLOGISCHE KOMPOSTIERUNG -->
    <div id="layer2" class="layer">
        <div class="compost-background-darker compost-clickable" id="compost-bg-2" data-next-layer="3">
            <img src="images/kompost_b.jpg" alt="Kompost" style="opacity: 0.15; filter: blur(1px);">
        </div>
        
        <div class="split-container">
            <!-- Links: Original-Textk√∂rper (w√§hlbar) -->
            <div class="split-left">
                <h3>üìñ Textk√∂rper</h3>
                <select id="corpus-select" class="corpus-dropdown">
                    <option value="full">Ganzer Textk√∂rper (84 Kapitel)</option>
                    <option value="part1">Nur Teil I: Schlaflosigkeitsrevolver</option>
                    <option value="part2">Nur Teil II: Blumen & L√∂cher</option>
                    <option value="part3">Nur Teil III: Die Abschaffung von Erfurt</option>
                </select>
                <div class="text-display" id="original-text">
                    <p class="hint">W√§hle Textk√∂rper oben...</p>
                </div>
            </div>
            
            <!-- Mitte: Biologische Parameter -->
            <div class="split-middle">
                <h3>üî¨ Bio-Parameter</h3>
                
                <!-- Temperatur -->
                <div class="param-control">
                    <label>
                        üå°Ô∏è Temperatur
                        <span class="param-value" id="temp-value">45¬∞C</span>
                    </label>
                    <input type="range" id="temperature" min="0" max="100" value="45" step="1">
                    <div class="param-hint">
                        <span class="cold">0-25¬∞C Kalt</span>
                        <span class="warm">25-45¬∞C Mesophil</span>
                        <span class="hot">45-70¬∞C Thermophil</span>
                        <span class="extreme">70-100¬∞C Extrem</span>
                    </div>
                </div>
                
                <!-- Feuchtigkeit -->
                <div class="param-control">
                    <label>
                        üíß Feuchtigkeit
                        <span class="param-value" id="moisture-value">50%</span>
                    </label>
                    <input type="range" id="moisture" min="0" max="80" value="50" step="5">
                    <div class="param-hint">
                        <span>0-40% Trocken</span>
                        <span>40-60% Optimal</span>
                        <span>60-80% Nass</span>
                    </div>
                </div>
                
                <!-- pH-Wert -->
                <div class="param-control">
                    <label>
                        üß™ pH-Wert
                        <span class="param-value" id="ph-value">7.0</span>
                    </label>
                    <input type="range" id="ph" min="4" max="10" value="7" step="0.5">
                    <div class="param-hint">
                        <span>4-6 Sauer</span>
                        <span>6-8 Neutral</span>
                        <span>8-10 Basisch</span>
                    </div>
                </div>
                
                <!-- Bel√ºftung -->
                <div class="param-control">
                    <label>üå¨Ô∏è Bel√ºftung</label>
                    <select id="aeration">
                        <option value="aerob">Aerob (lesbar)</option>
                        <option value="anaerob">Anaerob (surreal)</option>
                    </select>
                </div>
                
                <!-- Enzym -->
                <div class="param-control">
                    <label>üß¨ Enzym-Essenz</label>
                    <select id="enzyme-select">
                        <option value="">Alle</option>
                        <option value="#Dividual">#Dividual</option>
                        <option value="#Lysis">#Lysis</option>
                        <option value="#Myzel">#Myzel</option>
                        <option value="#Noise">#Noise</option>
                        <option value="#Resonanz">#Resonanz</option>
                    </select>
                </div>
                
                <!-- Zone -->
                <div class="param-control">
                    <label>üåç Zonen-Tiefe</label>
                    <select id="zone-select">
                        <option value="">Alle Zonen</option>
                        <option value="I">Zone I (Biographisch)</option>
                        <option value="II">Zone II (Mittel)</option>
                        <option value="III">Zone III (Maximal zersetzt)</option>
                    </select>
                </div>
                
                <!-- Text-L√§nge -->
                <div class="param-control">
                    <label>
                        üìè Text-L√§nge
                        <span class="param-value" id="length-value">500 W√∂rter</span>
                    </label>
                    <input type="range" id="text-length" min="100" max="2000" value="500" step="100">
                    <div class="param-hint">
                        <span>100-500</span>
                        <span>500-1000</span>
                        <span>1000-2000</span>
                    </div>
                </div>
                
                <!-- C:N-Verh√§ltnis (Fragmentierung) -->
                <div class="param-control">
                    <label>
                        üîÑ C:N-Verh√§ltnis
                        <span class="param-value" id="cn-value">30:1</span>
                    </label>
                    <input type="range" id="cn-ratio" min="10" max="50" value="30" step="5">
                    <div class="param-hint">
                        <span>10 N-reich (zusammenh√§ngend)</span>
                        <span>30 Optimal</span>
                        <span>50 C-reich (fragmentiert)</span>
                    </div>
                </div>
                
                <button class="btn-generate" id="btn-generate">
                    üå± KOMPOSTIEREN
                </button>
                
                <button class="btn-humus" id="btn-to-humus" style="margin-top: 10px;">
                    ‚Üíüíö HUMUS SPEICHERN
                </button>
                
                <div class="humus-status" id="humus-status">
                    Humus: <span id="humus-count">0</span> / 20
                </div>
            </div>
            
            <!-- Rechts: Generierter Output -->
            <div class="split-right">
                <h3>üî¨ Generiert</h3>
                <div class="text-display" id="generated-text">
                    <p class="hint">Klicke GENERIEREN um zu beginnen...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- LAYER 3: KI-FERMENTIERUNG -->
    <div id="layer3" class="layer">
        <div class="compost-background-darkest compost-clickable" id="compost-bg-3" data-next-layer="4">
            <img src="images/kompost_b.jpg" alt="Kompost" style="opacity: 0.05; filter: blur(3px);">
        </div>
        
        <div class="transformation-container">
            <!-- Input-Auswahl -->
            <div class="ki-input-select">
                <label>
                    <input type="radio" name="ki-input" value="new" checked> Neuer Text
                </label>
                <label>
                    <input type="radio" name="ki-input" value="humus"> Aus Humus
                </label>
                <select id="humus-select" class="hidden" style="margin-left: 10px;">
                    <option>W√§hle Humus-Eintrag...</option>
                </select>
            </div>
            
            <!-- Gro√ües Textfeld -->
            <div class="ki-text-area">
                <textarea id="ki-input-text" placeholder="Text hier eingeben oder aus Humus w√§hlen..."></textarea>
            </div>
            
            <!-- KI-Parameter -->
            <div class="ki-params">
                <h3>ü§ñ KI-Fermentierung</h3>
                
                <div class="param-control">
                    <label>üåÄ Chaos-Grad</label>
                    <input type="range" id="chaos-level" min="0" max="100" value="50">
                    <span id="chaos-val">50%</span>
                </div>
                
                <div class="param-control">
                    <label>ü§ñ KI-Modus</label>
                    <select id="ki-mode">
                        <option value="compress">Verdichten</option>
                        <option value="expand">Erweitern</option>
                        <option value="alienate">Verfremden</option>
                        <option value="dream">Halluzinieren</option>
                    </select>
                </div>
                
                <div class="param-control">
                    <label>üî• Fragmentierung</label>
                    <input type="range" id="fragment-level" min="0" max="100" value="30">
                    <span id="fragment-val">30%</span>
                </div>
                
                <button class="btn-transform" id="btn-ki-transform">
                    ‚ö° TRANSFORMIEREN
                </button>
                
                <button class="btn-humus" id="btn-ki-to-humus" style="margin-top: 10px;">
                    ‚Üíüíô HUMUS SPEICHERN
                </button>
            </div>
            
            <!-- Output -->
            <div class="ki-output-area">
                <h3>üß¨ Transformiert</h3>
                <div id="ki-output" class="text-display">
                    <p class="hint">Klicke TRANSFORMIEREN...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- LAYER 4: HUMUS-CHAOS -->
    <div id="layer4" class="layer">
        <div class="compost-background-black">
            <img src="images/kompost_b.jpg" alt="Kompost" style="opacity: 0.02; filter: blur(5px);">
        </div>
        
        <div class="humus-view">
            <h1 style="color: #2ecc71; text-align: center; margin-top: 5vh; font-size: 3em;">
                üåë HUMUS
            </h1>
            <p style="text-align: center; color: #7f8c8d; margin-bottom: 20px; font-size: 1.2em;">
                <span id="humus-total-count">0</span> Schichten ¬∑ Live-Mutation aktiv
            </p>
            
            <!-- Canvas f√ºr Humus-Visualisierung -->
            <canvas id="humus-canvas" width="1200" height="800"></canvas>
            
            <!-- Export -->
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn-export" id="btn-export-humus">
                    üì• HUMUS.TXT EXPORTIEREN
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/humus.js"></script>
    <script src="js/layers.js"></script>
    <script src="js/book.js"></script>
    <script src="js/generator.js"></script>
    <script src="js/ki-humus.js"></script>
</body>
</html>
