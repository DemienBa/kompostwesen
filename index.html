<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Das Kompostwesen</title>
    <link rel="stylesheet" href="css/layers.css">
    <link rel="stylesheet" href="css/mobile.css">
</head>
<body>
    <!-- LAYER 0: KOMPOST A + SCHWARZE KUGEL -->
    <div id="layer0" class="layer active">
        <div class="compost-start" id="compost-start">
            <img src="images/kompost_a.jpg" alt="Komposthaufen" class="compost-photo">
            
            <!-- Schwarze Kugel (erscheint nach erstem Click) -->
            <div class="black-orb hidden" id="black-orb">
                <div class="orb-inner"></div>
            </div>
            
            <!-- Buchcover (erscheint nach Kugel-Click) -->
            <div class="book-reveal hidden" id="book-reveal">
                <img src="images/buchcover_real.jpg" alt="Buchcover" class="book-cover-reveal">
            </div>
        </div>
    </div>

    <!-- LAYER 1: BUCH LESEN (Inhaltsverzeichnis + Kapitel) -->
    <div id="layer1" class="layer">
        <!-- Kompost B Hintergrund -->
        <div class="compost-background" id="compost-bg-1">
            <img src="images/kompost_b.jpg" alt="Kompost">
        </div>
        
        <!-- Navigation: Bakterium (nur Mobile sichtbar) -->
        <button class="btn-nav-bakterium" onclick="switchLayer(2)" title="Zur Bio-Kompostierung">
            ü¶†
        </button>
        
        <!-- Buch-Fenster -->
        <div class="book-window">
            <div class="book-header">
                <h1 id="book-title">Die fr√∂hliche Abschaffung von Ostdeutschland</h1>
                <p class="book-subtitle">Gesammelte Werke</p>
            </div>
            
            <!-- Inhaltsverzeichnis -->
            <div class="table-of-contents" id="toc">
                <h2>Inhaltsverzeichnis</h2>
                <div id="toc-list"></div>
            </div>
            
            <!-- Lese-Ansicht -->
            <div class="reading-view hidden" id="reading-view">
                <div class="chapter-header">
                    <button class="nav-btn" id="prev-chapter">‚Üê Vorheriges</button>
                    <h2 id="chapter-title"></h2>
                    <button class="nav-btn" id="next-chapter">N√§chstes ‚Üí</button>
                </div>
                
                <div class="chapter-content" id="chapter-content"></div>
                
                <div class="chapter-footer">
                    <button class="btn-secondary" id="back-to-toc">‚Üê Zur√ºck zum Inhaltsverzeichnis</button>
                    <div class="chapter-meta" id="chapter-meta"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- LAYER 2: BIOLOGISCHE KOMPOSTIERUNG -->
    <div id="layer2" class="layer">
        <div class="compost-background-darker compost-clickable" id="compost-bg-2" data-next-layer="3">
            <img src="images/kompost_b.jpg" alt="Kompost" style="opacity: 0.15; filter: blur(1px);">
        </div>
        
        <div class="split-container">
            <!-- Links: Sammler (gesammelte Texte) -->
            <div class="split-left">
                <h3>üß™ Sammler</h3>
                <div class="text-display kompost-sammler" id="kompost-sammler" title="Klick ‚Üí weiter zu Layer 3">
                    <p class="hint" id="sammler-hint">Sammler leer</p>
                    <div id="sammler-content"></div>
                </div>
                <div class="sammler-status">
                    <span id="sammler-count">0</span> / 4 gesammelt
                </div>
            </div>
            
            <!-- Mitte: Parameter + Dropdown -->
            <div class="split-middle">
                <h3>üî¨ Bio-Parameter</h3>
                
                <!-- üìö TEXTK√ñRPER AUSWAHL -->
                <div class="param-control">
                    <label>üìö Textk√∂rper</label>
                    <select id="corpus-select" class="corpus-dropdown">
                        <option value="full">Alle Teile</option>
                        <option value="part1">Teil I: Schlaflosigkeitsrevolver</option>
                        <option value="part2">Teil II: Blumen & L√∂cher</option>
                        <option value="part3">Teil III: Die Abschaffung von Erfurt</option>
                    </select>
                </div>
                
                <!-- üå°Ô∏è TEMPERATUR -->
                <div class="param-control">
                    <label>
                        üå°Ô∏è Temperatur
                        <span class="param-value" id="temp-value">50¬∞</span>
                    </label>
                    <input type="range" id="bio-temperature" min="0" max="100" value="50" step="5">
                    <div class="param-hint">
                        <span>Kalt = lange Passagen</span>
                        <span>Hei√ü = kurze Fetzen</span>
                    </div>
                </div>
                
                <!-- üíß FEUCHTIGKEIT -->
                <div class="param-control">
                    <label>
                        üíß Feuchtigkeit
                        <span class="param-value" id="moisture-value">50%</span>
                    </label>
                    <input type="range" id="bio-moisture" min="0" max="100" value="50" step="5">
                    <div class="param-hint">
                        <span>Trocken = Br√ºche</span>
                        <span>Feucht = flie√üend</span>
                    </div>
                </div>
                
                <!-- üîÄ DURCHMISCHUNG -->
                <div class="param-control">
                    <label>
                        üîÄ Durchmischung
                        <span class="param-value" id="mixing-value">50%</span>
                    </label>
                    <input type="range" id="bio-mixing" min="0" max="100" value="50" step="5">
                    <div class="param-hint">
                        <span>Geordnet</span>
                        <span>Chaotisch</span>
                    </div>
                </div>
                
                <!-- üìè TEXTMENGE -->
                <div class="param-control">
                    <label>
                        üìè Textmenge
                        <span class="param-value" id="length-value">200 W√∂rter</span>
                    </label>
                    <input type="range" id="bio-length" min="50" max="1000" value="200" step="50">
                </div>
                
                <!-- BUTTONS -->
                <div class="button-group">
                    <button class="btn-generate" id="btn-generate">
                        üå± KOMPOSTIEREN
                    </button>
                    
                    <button class="btn-reroll" id="btn-reroll" title="Zuf√§llige Parameter">
                        üé≤
                    </button>
                </div>
            </div>
            
            <!-- Rechts: Frischer Output (klickbar ‚Üí wandert nach links) -->
            <div class="split-right">
                <h3>üå± Frischer Kompost</h3>
                <div class="text-display output-box" id="generated-text" title="Klick ‚Üí zum Sammler hinzuf√ºgen">
                    <p class="hint" id="output-hint">Warte auf Kompost...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- LAYER 3: KI-FERMENTIERUNG -->
    <div id="layer3" class="layer">
        <div class="compost-background-darkest compost-clickable" id="compost-bg-3" data-next-layer="4">
            <img src="images/kompost_b.jpg" alt="Kompost" style="opacity: 0.05; filter: blur(3px);">
            <div class="glitch-overlay"></div>
        </div>
        
        <div class="ki-container">
            <!-- INPUT BOX (verschwindet nach Transformation) -->
            <div id="ki-input-box" class="ki-box floating-blue">
                <h3>üì• BIO-KOMPOST INPUT</h3>
                <textarea id="ki-input-text" readonly placeholder="Text wird automatisch aus Layer 2 √ºbertragen..."></textarea>
                <p class="readonly-hint">‚ö†Ô∏è Text kann nur durch Bio-Kompostierung erzeugt werden</p>
                
                <div class="ki-params">
                    <div class="param-row">
                        <label>ü§ñ Modus:</label>
                        <select id="ki-mode">
                            <option value="compress">üóúÔ∏è Verdichten (50%)</option>
                            <option value="expand">üìà Erweitern (150%)</option>
                            <option value="alienate">üîÄ Verfremden</option>
                            <option value="dream">üåÄ Halluzinieren</option>
                        </select>
                    </div>
                    
                    <div class="param-row">
                        <label>üåÄ Chaos: <span id="chaos-val">50%</span></label>
                        <input type="range" id="chaos-level" min="0" max="100" value="50">
                    </div>
                    
                    <button class="btn-ferment" id="btn-ki-transform">
                        ‚ö° FERMENTIEREN
                    </button>
                </div>
            </div>
            
            <!-- OUTPUT BOX (erscheint nach Transformation) -->
            <div id="ki-output-box" class="ki-box floating-blue-strong hidden">
                <h3>üß¨ FERMENTIERT</h3>
                <div id="ki-output-text" class="output-text"></div>
                
                <div class="ki-actions">
                    <button class="btn-humus-blue hidden" id="btn-ki-humus">
                        ‚Üíüíô HUMUS SPEICHERN
                    </button>
                    <span id="ki-humus-status"></span>
                </div>
                <p class="click-hint">üí° Click auf diese Box ‚Üí Layer 4 (Humus)</p>
            </div>
        </div>
    </div>

    <!-- LAYER 4: HUMUS-CHAOS -->
    <div id="layer4" class="layer">
        <div class="compost-background-black">
            <img src="images/kompost_b.jpg" alt="Kompost" style="opacity: 0.02; filter: blur(5px);">
        </div>
        
        <div class="humus-fullscreen">
            <!-- Canvas f√ºr Humus-Visualisierung (Vollbild) -->
            <canvas id="humus-canvas"></canvas>
            
            <!-- Export-Button schwebend -->
            <button class="btn-export-float" id="btn-export-humus">
                üì• EXPORTIEREN
            </button>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/humus.js"></script>
    <script src="js/humus-v2.js"></script>
    <script src="js/layers.js"></script>
    <script src="js/book.js"></script>
    <script src="js/generator-v2.js"></script>
    <script src="js/ki-humus.js"></script>
    <script src="js/swipe.js"></script>
    <script src="js/bandcamp.js"></script>
</body>
</html>
