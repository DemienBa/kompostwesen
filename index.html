<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Das Kompostwesen</title>
    <link rel="stylesheet" href="css/layers.css?v=20260106b">
    <link rel="stylesheet" href="css/mobile.css?v=20260106b">
</head>
<body>
    <!-- LAYER 0: KOMPOST A + SCHWARZE KUGEL -->
    <div id="layer0" class="layer active">
        <div class="compost-start" id="compost-start">
            <img src="images/kompost_a.jpg" alt="Komposthaufen" class="compost-photo">
            
            <!-- Schwarze Kugel (erscheint nach erstem Click) -->
            <div class="black-orb hidden" id="black-orb">
                <div class="orb-inner"></div>
            </div>
            
            <!-- Buchcover (erscheint nach Kugel-Click) -->
            <div class="book-reveal hidden" id="book-reveal">
                <img src="images/buchcover_real.jpg" alt="Buchcover" class="book-cover-reveal">
            </div>
        </div>
    </div>

    <!-- LAYER 1: BUCH LESEN (Inhaltsverzeichnis + Kapitel) -->
    <div id="layer1" class="layer">
        <!-- Kompost B Hintergrund -->
        <div class="compost-background" id="compost-bg-1">
            <img src="images/kompost_b.jpg" alt="Kompost">
        </div>
        
        <!-- Navigation: Bakterium (nur Mobile sichtbar) -->
        <button class="btn-nav-bakterium" onclick="switchLayer(2)" title="Zur Bio-Kompostierung">
            ğŸ¦ 
        </button>
        
        <!-- Buch-Fenster -->
        <div class="book-window">
            <div class="book-header">
                <h1 id="book-title">Die frÃ¶hliche Abschaffung von Ostdeutschland</h1>
                <p class="book-subtitle">Gesammelte Werke</p>
            </div>
            
            <!-- Inhaltsverzeichnis -->
            <div class="table-of-contents" id="toc">
                <h2>Inhaltsverzeichnis</h2>
                <div id="toc-list"></div>
            </div>
            
            <!-- Lese-Ansicht -->
            <div class="reading-view hidden" id="reading-view">
                <div class="chapter-header">
                    <button class="nav-btn" id="prev-chapter">â† Vorheriges</button>
                    <h2 id="chapter-title"></h2>
                    <button class="nav-btn" id="next-chapter">NÃ¤chstes â†’</button>
                </div>
                
                <div class="chapter-content" id="chapter-content"></div>
                
                <div class="chapter-footer">
                    <button class="btn-secondary" id="back-to-toc">â† ZurÃ¼ck zum Inhaltsverzeichnis</button>
                    <div class="chapter-meta" id="chapter-meta"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- LAYER 2: BIOLOGISCHE KOMPOSTIERUNG -->
    <div id="layer2" class="layer">
        <div class="compost-background-darker compost-clickable" id="compost-bg-2" data-next-layer="3">
            <img src="images/kompost_b.jpg" alt="Kompost" style="opacity: 0.15; filter: blur(1px);">
        </div>
        
        <div class="split-container">
            <!-- Links: Sammler (gesammelte Texte) -->
            <div class="split-left">
                <h3>ğŸ§ª Sammler</h3>
                <div class="text-display kompost-sammler" id="kompost-sammler" title="Klick â†’ weiter zu Layer 3">
                    <p class="hint" id="sammler-hint">Sammler leer</p>
                    <div id="sammler-content"></div>
                </div>
                <div class="sammler-status">
                    <span id="sammler-count">0</span> / 4 gesammelt
                </div>
            </div>
            
            <!-- Mitte: Parameter + Dropdown -->
            <div class="split-middle">
                <h3>ğŸ”¬ Bio-Parameter</h3>
                
                <!-- ğŸ“š TEXTKÃ–RPER AUSWAHL -->
                <div class="param-control">
                    <label>ğŸ“š TextkÃ¶rper</label>
                    <select id="corpus-select" class="corpus-dropdown">
                        <option value="full">Alle Teile</option>
                        <option value="part1">Teil I: Schlaflosigkeitsrevolver</option>
                        <option value="part2">Teil II: Blumen & LÃ¶cher</option>
                        <option value="part3">Teil III: Die Abschaffung von Erfurt</option>
                    </select>
                </div>
                
                <!-- ğŸŒ¡ï¸ TEMPERATUR -->
                <div class="param-control">
                    <label>
                        ğŸŒ¡ï¸ Temperatur
                        <span class="param-value" id="temp-value">50Â°</span>
                    </label>
                    <input type="range" id="bio-temperature" min="0" max="100" value="50" step="5">
                    <div class="param-hint">
                        <span>Kalt = lange Passagen</span>
                        <span>HeiÃŸ = kurze Fetzen</span>
                    </div>
                </div>
                
                <!-- ğŸ’§ FEUCHTIGKEIT -->
                <div class="param-control">
                    <label>
                        ğŸ’§ Feuchtigkeit
                        <span class="param-value" id="moisture-value">50%</span>
                    </label>
                    <input type="range" id="bio-moisture" min="0" max="100" value="50" step="5">
                    <div class="param-hint">
                        <span>Trocken = BrÃ¼che</span>
                        <span>Feucht = flieÃŸend</span>
                    </div>
                </div>
                
                <!-- ğŸ”€ DURCHMISCHUNG -->
                <div class="param-control">
                    <label>
                        ğŸ”€ Durchmischung
                        <span class="param-value" id="mixing-value">50%</span>
                    </label>
                    <input type="range" id="bio-mixing" min="0" max="100" value="50" step="5">
                    <div class="param-hint">
                        <span>Geordnet</span>
                        <span>Chaotisch</span>
                    </div>
                </div>
                
                <!-- ğŸ“ TEXTMENGE -->
                <div class="param-control">
                    <label>
                        ğŸ“ Textmenge
                        <span class="param-value" id="length-value">200 WÃ¶rter</span>
                    </label>
                    <input type="range" id="bio-length" min="50" max="1000" value="200" step="50">
                </div>
                
                <!-- BUTTONS -->
                <div class="button-group">
                    <button class="btn-generate" id="btn-generate">
                        ğŸŒ± KOMPOSTIEREN
                    </button>
                    
                    <button class="btn-reroll" id="btn-reroll" title="ZufÃ¤llige Parameter">
                        ğŸ²
                    </button>
                </div>
            </div>
            
            <!-- Rechts: Frischer Output (klickbar â†’ wandert nach links) -->
            <div class="split-right">
                <h3>ğŸŒ± Frischer Kompost</h3>
                <div class="text-display output-box" id="generated-text" title="Klick â†’ zum Sammler hinzufÃ¼gen">
                    <p class="hint" id="output-hint">Warte auf Kompost...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- LAYER 3: KI-FERMENTIERUNG -->
    <div id="layer3" class="layer">
        <div class="compost-background-darkest compost-clickable" id="compost-bg-3" data-next-layer="4">
            <img src="images/kompost_b.jpg" alt="Kompost" style="opacity: 0.05; filter: blur(3px);">
            <div class="glitch-overlay"></div>
        </div>
        
        <div class="ki-container">
            <!-- INPUT BOX (verschwindet nach Transformation) -->
            <div id="ki-input-box" class="ki-box floating-blue">
                <h3>ğŸ“¥ BIO-KOMPOST INPUT</h3>
                <textarea id="ki-input-text" readonly placeholder="Text wird automatisch aus Layer 2 Ã¼bertragen..."></textarea>
                <p class="readonly-hint">âš ï¸ Text kann nur durch Bio-Kompostierung erzeugt werden</p>
                
                <div class="ki-params">
                    <div class="param-row">
                        <label>ğŸ¤– Modus:</label>
                        <select id="ki-mode">
                            <option value="compress">ğŸ—œï¸ Verdichten (50%)</option>
                            <option value="expand">ğŸ“ˆ Erweitern (150%)</option>
                            <option value="alienate">ğŸ”€ Verfremden</option>
                            <option value="dream">ğŸŒ€ Halluzinieren</option>
                        </select>
                    </div>
                    
                    <div class="param-row">
                        <label>ğŸŒ€ Chaos: <span id="chaos-val">50%</span></label>
                        <input type="range" id="chaos-level" min="0" max="100" value="50">
                    </div>
                    
                    <button class="btn-ferment" id="btn-ki-transform">
                        âš¡ FERMENTIEREN
                    </button>
                </div>
            </div>
            
            <!-- OUTPUT BOX (erscheint nach Transformation) -->
            <div id="ki-output-box" class="ki-box floating-blue-strong hidden">
                <h3>ğŸ§¬ FERMENTIERT</h3>
                <div id="ki-output-text" class="output-text"></div>
                
                <div class="ki-actions">
                    <button class="btn-humus-blue hidden" id="btn-ki-humus">
                        â†’ğŸ’™ HUMUS SPEICHERN
                    </button>
                    <span id="ki-humus-status"></span>
                </div>
                <p class="click-hint">ğŸ’¡ Click auf diese Box â†’ Layer 4 (Humus)</p>
            </div>
        </div>
    </div>

    <!-- LAYER 4: HUMUS -->
    <div id="layer4" class="layer">
        <div class="compost-background-black">
            <img src="images/kompost_b.jpg" alt="Kompost" style="opacity: 0.02; filter: blur(5px);">
        </div>
        
        <div class="humus-fullscreen">
            <!-- FlieÃŸtext-Ansicht (Standard) -->
            <div id="humus-text-view" class="humus-text-view">
                <div id="humus-text-content" class="humus-text-content">
                    <p class="hint">Noch kein Humus gesammelt...</p>
                </div>
            </div>
            
            <!-- Canvas fÃ¼r zersetzte Ansicht (versteckt bis aktiviert) -->
            <canvas id="humus-canvas" style="display: none;"></canvas>
            
            <!-- Buttons unten links -->
            <div class="humus-buttons">
                <button class="btn-humus-action" id="btn-toggle-view" title="Ansicht wechseln">
                    ğŸ”€ Zersetzen
                </button>
                <button class="btn-humus-action" id="btn-export-humus" title="Als Text kopieren">
                    ğŸ“‹ Kopieren
                </button>
                <button class="btn-humus-action" id="btn-share-humus" title="Teilen">
                    ğŸ“¤ Teilen
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/humus.js"></script>
    <script src="js/humus-v3.js"></script>
    <script src="js/layers.js?v=20260106b"></script>
    <script src="js/book.js"></script>
    <script src="js/generator-v2.js?v=20260106b"></script>
    <script src="js/ki-humus.js"></script>
    <script src="js/swipe.js"></script>
    <script src="js/bandcamp.js"></script>
</body>
</html>
